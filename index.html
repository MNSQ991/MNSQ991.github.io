<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ® è´ªåƒè›‡æ¸¸æˆ</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #2c3e50;
    }
    #game-container {
      margin: 20px auto;
      position: relative;
      width: 400px;
      height: 400px;
      border: 10px solid #333;
      background: #111;
    }
    .snake {
      position: absolute;
      width: 20px;
      height: 20px;
      background: lime;
      border-radius: 5px;
    }
    .food {
      position: absolute;
      width: 20px;
      height: 20px;
      background: red;
      border-radius: 50%;
    }
    #score {
      font-size: 24px;
      margin: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #0074D9;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }
    button:hover {
      background: #0056a3;
    }
    .footer {
      margin-top: 30px;
      color: #666;
    }
    .footer a {
      color: #0074D9;
      text-decoration: none;
    }
  </style>
</head>
<body>

  <h1>ğŸ è´ªåƒè›‡æ¸¸æˆ</h1>
  <div id="score">å¾—åˆ†ï¼š0</div>
  <div id="game-container"></div>
  <button onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
  <button onclick="location.href='#'">åˆ·æ–°é‡æ¥</button>

  <div class="footer">
    <p>ğŸ® ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶è›‡ç§»åŠ¨ | <a href="blog.html">å›åˆ°æˆ‘çš„åšå®¢ä¸»é¡µ</a></p>
  </div>

  <script>
    const container = document.getElementById("game-container");
    const scoreDisplay = document.getElementById("score");
    const width = 400;
    const cellSize = 20;
    const cols = width / cellSize;
    const rows = width / cellSize;

    let snake = [];
    let food = {};
    let direction = "right";
    let nextDirection = "right";
    let score = 0;
    let gameInterval;
    let gameRunning = false;

    function initGame() {
      // æ¸…é™¤ä¸Šä¸€å±€
      container.innerHTML = "";
      snake = [{ x: 10, y: 10 }];
      direction = "right";
      nextDirection = "right";
      score = 0;
      scoreDisplay.textContent = "å¾—åˆ†ï¼š" + score;
      gameRunning = true;

      // åˆ›å»ºé£Ÿç‰©
      createFood();

      // ç»˜åˆ¶è›‡
      drawSnake();
    }

    function drawSnake() {
      // æ¸…ç©ºè›‡
      document.querySelectorAll(".snake").forEach(el => el.remove());
      document.querySelectorAll(".food").forEach(el => el.remove());

      // ç”»è›‡
      snake.forEach((part, index) => {
        const snakeElement = document.createElement("div");
        snakeElement.classList.add("snake");
        snakeElement.style.left = part.x * cellSize + "px";
        snakeElement.style.top = part.y * cellSize + "px";
        if (index === 0) snakeElement.style.background = "#0f0"; // å¤´éƒ¨äº®ä¸€ç‚¹
        container.appendChild(snakeElement);
      });

      // ç”»é£Ÿç‰©
      const foodElement = document.createElement("div");
      foodElement.classList.add("food");
      foodElement.style.left = food.x * cellSize + "px";
      foodElement.style.top = food.y * cellSize + "px";
      container.appendChild(foodElement);
    }

    function createFood() {
      food = {
        x: Math.floor(Math.random() * cols),
        y: Math.floor(Math.random() * rows)
      };

      // é¿å…é£Ÿç‰©ç”Ÿæˆåœ¨è›‡èº«ä¸Š
      for (let part of snake) {
        if (part.x === food.x && part.y === food.y) {
          return createFood();
        }
      }
    }

    function moveSnake() {
      direction = nextDirection;
      const head = { ...snake[0] };

      switch (direction) {
        case "up": head.y--; break;
        case "down": head.y++; break;
        case "left": head.x--; break;
        case "right": head.x++; break;
      }

      // æ’å¢™æ£€æµ‹
      if (head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows) {
        gameOver();
        return;
      }

      // æ’è‡ªå·±
      if (snake.some(part => part.x === head.x && part.y === head.y)) {
        gameOver();
        return;
      }

      // æ’å…¥æ–°å¤´
      snake.unshift(head);

      // åƒåˆ°é£Ÿç‰©
      if (head.x === food.x && head.y === food.y) {
        score += 10;
        scoreDisplay.textContent = "å¾—åˆ†ï¼š" + score;
        createFood();
      } else {
        snake.pop(); // æ²¡åƒåˆ°å°±åˆ å°¾
      }

      drawSnake();
    }

    function gameOver() {
      clearInterval(gameInterval);
      gameRunning = false;
      alert("æ¸¸æˆç»“æŸï¼ä½ çš„å¾—åˆ†ï¼š" + score);
    }

    function startGame() {
      if (gameRunning) return;
      initGame();
      clearInterval(gameInterval);
      gameInterval = setInterval(moveSnake, 150); // æ§åˆ¶é€Ÿåº¦
    }

    // é”®ç›˜æ§åˆ¶
    document.addEventListener("keydown", (e) => {
      switch (e.key) {
        case "ArrowUp":
          if (direction !== "down") nextDirection = "up";
          e.preventDefault();
          break;
        case "ArrowDown":
          if (direction !== "up") nextDirection = "down";
          e.preventDefault();
          break;
        case "ArrowLeft":
          if (direction !== "right") nextDirection = "left";
          e.preventDefault();
          break;
        case "ArrowRight":
          if (direction !== "left") nextDirection = "right";
          e.preventDefault();
          break;
      }
    });

    // åˆå§‹æç¤º
    alert("ğŸ® æ¬¢è¿æ¥åˆ°è´ªåƒè›‡ï¼\nä½¿ç”¨æ–¹å‘é”®æ§åˆ¶ï¼Œç‚¹å‡»ã€å¼€å§‹æ¸¸æˆã€‘å¯åŠ¨ï½");
  </script>
</body>
</html>
