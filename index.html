<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ“ æˆ‘çš„åšå®¢</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }
    h1, h2 { color: #333; }
    .post { border-bottom: 1px solid #eee; padding: 20px 0; }
    .comment { background: #f9f9f9; padding: 10px 15px; margin: 10px 0; border-radius: 5px; font-size: 0.9em; }
    textarea, input[type="text"] { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #0074D9; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; margin-right: 8px; }
    button:hover { background: #0056a3; }
    .folder-tip { color: #666; font-size: 0.9em; margin: 20px 0; }
  </style>
</head>
<body>

  <h1>ğŸ“ æˆ‘çš„ GitHub åšå®¢</h1>
  <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°å¤©åœ°ï¼æ–°æ–‡ç« ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ° <code>æ–‡ç« </code> æ–‡ä»¶å¤¹ä¸­ã€‚</p>
  <div class="folder-tip">
    ğŸ’¡ å»ºè®®ï¼šåœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªå« <strong>æ–‡ç« </strong> çš„æ–‡ä»¶å¤¹ï¼ŒæŠŠç”Ÿæˆçš„ .html æ–‡ä»¶æ”¾è¿›å»ã€‚
  </div>

  <!-- å‘è¡¨æ–°æ–‡ç«  -->
  <div style="margin-top: 40px;">
    <h2>âœï¸ å†™ä¸€ç¯‡æ–‡ç« </h2>
    <input type="text" id="postTitle" placeholder="è¾“å…¥æ ‡é¢˜" />
    <textarea id="postContent" rows="5" placeholder="å†™ä¸‹ä½ çš„æƒ³æ³•..."></textarea>
    <button onclick="addPost()">å‘å¸ƒæ–‡ç« </button>
    <button onclick="alert('è¯·å°†ç”Ÿæˆçš„æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°çš„ \\u0060æ–‡ç« \\u0060 æ–‡ä»¶å¤¹ä¸­ã€‚')">ğŸ“Œ å¦‚ä½•ä¿å­˜ï¼Ÿ</button>
  </div>

  <!-- æ–‡ç« åˆ—è¡¨ -->
  <div id="postsContainer">
    <!-- ç¤ºä¾‹æ–‡ç«  -->
    <div class="post">
      <h3>ç¬¬ä¸€ç¯‡ï¼šä»Šå¤©å¼€å§‹å­¦ç¼–ç¨‹</h3>
      <p>è¿™æ˜¯æˆ‘åœ¨ GitHub ä¸Šå†™çš„ç¬¬ä¸€ä¸ªç½‘é¡µï¼Œæ„Ÿè§‰è¶…æœ‰æˆå°±æ„Ÿï¼ğŸ‰</p>
      <small>ğŸ“… 2025-11-20</small>

      <!-- è¯„è®ºåŒº -->
      <div style="margin-top: 20px;">
        <h4>ğŸ’¬ è¯„è®º</h4>
        <textarea id="commentInput_0" placeholder="è¯´ç‚¹ä»€ä¹ˆå§..." rows="3"></textarea>
        <button onclick="addComment(0)">å‘è¡¨è¯„è®º</button>

        <!-- æ˜¾ç¤ºè¯„è®º -->
        <div id="comments_0">
          <div class="comment">å¥½å‰å®³å‘€ï¼ŒåŠ æ²¹ï¼ â€”â€” å°æ˜</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ–‡ç« æ•°æ®
    let posts = [
      { title: "ç¬¬ä¸€ç¯‡ï¼šä»Šå¤©å¼€å§‹å­¦ç¼–ç¨‹", content: "è¿™æ˜¯æˆ‘åœ¨ GitHub ä¸Šå†™çš„ç¬¬ä¸€ä¸ªç½‘é¡µï¼Œæ„Ÿè§‰è¶…æœ‰æˆå°±æ„Ÿï¼ğŸ‰", comments: ["å¥½å‰å®³å‘€ï¼ŒåŠ æ²¹ï¼ â€”â€” å°æ˜"] }
    ];

    // æ·»åŠ æ–°æ–‡ç« ï¼ˆå«ä¿å­˜åŠŸèƒ½ï¼‰
    function addPost() {
      const title = document.getElementById("postTitle").value.trim();
      const content = document.getElementById("postContent").value.trim();

      if (!title || !content) {
        alert("æ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©ºï¼");
        return;
      }

      const newPost = { title, content, comments: [] };
      posts.push(newPost);
      renderPosts();

      // âœ… ç”Ÿæˆå¹¶ä¸‹è½½æ–‡ç« æ–‡ä»¶
      generatePostFile(newPost);

      // æ¸…ç©ºè¾“å…¥æ¡†
      document.getElementById("postTitle").value = "";
      document.getElementById("postContent").value = "";
    }

    // ç”Ÿæˆå•ç¯‡æ–‡ç« çš„ HTML æ–‡ä»¶å¹¶è§¦å‘ä¸‹è½½
    function generatePostFile(post) {
      const now = new Date();
      const dateStr = now.toISOString().split('T')[0]; // 2025-11-20
      const safeTitle = post.title.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g, '-') || 'untitled';
      const filename = `æ–‡ç« /${dateStr}-${safeTitle}.html`; // ä¿å­˜è·¯å¾„

      const htmlContent = `
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${post.title}</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: 40px auto; padding: 20px; line-height: 1.6; }
    h1 { color: #2c3e50; }
    .meta { color: #7f8c8d; font-size: 0.9em; margin-bottom: 20px; }
    .comment { background: #f1f1f1; padding: 10px; margin: 10px 0; border-left: 4px solid #3498db; }
  </style>
</head>
<body>
  <h1>ğŸ“„ ${post.title}</h1>
  <div class="meta">ğŸ“… å‘å¸ƒäº ${now.toLocaleString()}</div>
  <div>${post.content.replace(/\n/g, '<br>')}</div>

  <h3>ğŸ’¬ è¯„è®ºï¼ˆå‘å¸ƒæ—¶å¿«ç…§ï¼‰</h3>
  <div id="comments">
    ${post.comments.length > 0 
      ? post.comments.map(c => `<div class="comment">${c}</div>`).join('')
      : '<em>æš‚æ— è¯„è®º</em>'
    }
  </div>
  <hr>
  <small>ğŸ“Œ è¿™æ˜¯é€šè¿‡ GitHub Pages åšå®¢è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ç« å½’æ¡£æ–‡ä»¶ã€‚</small>
</body>
</html>
      `;

      const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename; // æµè§ˆå™¨ä¼šæç¤ºä¿å­˜åˆ°â€œæ–‡ç« â€æ–‡ä»¶å¤¹
      a.click();
      URL.revokeObjectURL(url);

      alert(\`æ–‡ç« å·²ç”Ÿæˆï¼è¯·å°†æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°çš„ â€œæ–‡ç« â€ æ–‡ä»¶å¤¹ä¸­ã€‚\`);
    }

    // æ·»åŠ è¯„è®º
    function addComment(postIndex) {
      const commentInputId = \`commentInput_\${postIndex}\`;
      const commentText = document.getElementById(commentInputId).value.trim();

      if (!commentText) {
        alert("è¯„è®ºä¸èƒ½ä¸ºç©ºï¼");
        return;
      }

      posts[postIndex].comments.push(commentText + " â€”â€” åŒ¿åç½‘å‹");
      renderPosts();
    }

    // é‡æ–°æ¸²æŸ“æ‰€æœ‰æ–‡ç« ï¼ˆå«è¯„è®ºï¼‰
    function renderPosts() {
      const container = document.getElementById("postsContainer");
      let html = "";

      posts.forEach((post, index) => {
        let commentsHtml = post.comments.map(c => \`<div class="comment">\${c}</div>\`).join("");

        html += \`
          <div class="post">
            <h3>\${post.title}</h3>
            <p>\${post.content}</p>
            <small>ğŸ“… \${new Date().toLocaleDateString()}</small>
            <div style="margin-top: 20px;">
              <h4>ğŸ’¬ è¯„è®º</h4>
              <textarea id="commentInput_\${index}" placeholder="è¯´ç‚¹ä»€ä¹ˆå§..." rows="3"></textarea>
              <button onclick="addComment(\${index})">å‘è¡¨è¯„è®º</button>
              <div id="comments_\${index}">
                \${commentsHtml}
              </div>
            </div>
          </div>
        \`;
      });

      container.innerHTML = html;
    }
  </script>
</body>
</html>
